(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{263:function(t,e,n){var content=n(271);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("65dbc3c5",content,!0,{sourceMap:!1})},270:function(t,e,n){"use strict";n(263)},271:function(t,e,n){var r=n(51)(!1);r.push([t.i,".leaflet-map[data-v-785129dd]{height:calc(100vh - 110px)}",""]),t.exports=r},283:function(t,e,n){"use strict";n.r(e);var r=n(7),o=(n(36),n(65),n(34),n(64)),l=n.n(o),c={data:function(){return{showDrawer:!1,vessels:[],currentVesselId:null,idToVessel:{},currentPosition:null,map:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:10,center:[13.4241522,100.5081311]},routes:[]}},computed:{currentVessel:function(){if(this.currentVesselId)return this.idToVessel[this.currentVesselId]},currentPositionIcon:function(){return window.L.icon({iconUrl:"/pins/current-position.png",iconSize:[32,32],iconAnchor:[16,16]})}},mounted:function(){var t=this;this.fetchVessels(),setTimeout((function(){t.getCurrentPosition()}),1e3)},methods:{vesselHistoryLineColor:function(t){if(t.routes){var e=null;if(t.routes.forEach((function(n){var r=Math.sqrt(Math.pow(t.location[0]-n[0],2)+Math.pow(t.location[1]-n[1],2));(!e||e>r)&&(e=r)})),e>.05)return"red"}return"blue"},vesselPin:function(t){return t.alarms.length>0||"red"===this.vesselHistoryLineColor(t)?window.L.icon({iconUrl:"/pins/vessel-red-pin32.png",iconSize:[32,32],iconAnchor:[16,16]}):window.L.icon({iconUrl:"/pins/vessel-pin32.png",iconSize:[32,32],iconAnchor:[16,16]})},fetchVessels:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/vessels.json");case 2:n=e.sent.data,t.vessels=n,r={},t.vessels.forEach((function(t){r[t.id]=t})),t.idToVessel=r;case 7:case"end":return e.stop()}}),e)})))()},getCurrentPosition:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.currentPosition=[e.coords.latitude,e.coords.longitude]}))},handleVesselClicked:function(t){this.currentVesselId=t},handleMapClick:function(t){this.routes.push([t.latlng.lat,t.latlng.lng])},handleOpenFilter:function(){this.showDrawer=!0}}},v=(n(270),n(44)),component=Object(v.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("client-only",[n("l-map",{staticClass:"leaflet-map",attrs:{zoom:t.map.zoom,center:t.map.center},on:{click:t.handleMapClick}},[n("l-control",{attrs:{position:"topright"}},[n("Button",{staticStyle:{width:"200px"},attrs:{type:"info"},on:{click:t.handleOpenFilter}},[t._v("\n          Open filters\n        ")])],1),t._v(" "),n("l-tile-layer",{attrs:{url:t.map.url,attribution:t.map.attribution}}),t._v(" "),t.currentPosition?n("l-marker",{key:"current-position",attrs:{"lat-lng":t.currentPosition,icon:t.currentPositionIcon}}):t._e(),t._v(" "),t._l(t.vessels,(function(e){return n("l-marker",{key:e.id,attrs:{"lat-lng":e.location,icon:t.vesselPin(e)},on:{click:function(n){return t.handleVesselClicked(e.id)}}},[n("l-popup",{staticStyle:{width:"400px"}},[n("div",[n("b",[t._v(t._s(e.vessel))]),t._v(" "),n("span",[t._v(t._s(e.datetime))])]),t._v(" "),n("div",[n("a",{attrs:{href:"https://www.google.com/maps/@"+e.location[0]+","+e.location[1]+",10z",target:"_blank"}},[t._v(t._s(e.location[0])+","+t._s(e.location[1]))])]),t._v(" "),n("div",[n("Tag",{attrs:{color:e.alarms.includes("F1")?"error":"success"}},[t._v("F1")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("F2")?"error":"success"}},[t._v("F2")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("F3")?"error":"success"}},[t._v("F3")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("P1")?"error":"success"}},[t._v("P1")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("P2")?"error":"success"}},[t._v("P2")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("P3")?"error":"success"}},[t._v("P3")]),t._v(" "),n("Tag",{attrs:{color:e.alarms.includes("P4")?"error":"success"}},[t._v("P4")])],1)])],1)})),t._v(" "),t.currentVessel?n("div",[t.currentVessel.routes?n("l-polyline",{attrs:{weight:50,opacity:.3,"lat-lngs":t.currentVessel.routes,color:"green"}}):t._e(),t._v(" "),t.currentVessel.history?n("l-polyline",{attrs:{weight:5,opacity:1,"lat-lngs":t.currentVessel.history,color:t.vesselHistoryLineColor(t.currentVessel)}}):t._e()],1):t._e()],2),t._v(" "),n("Drawer",{attrs:{title:"Filters"},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}},[n("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n        Vessel\n        "),n("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"Vessel"}})],1),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n        From\n        "),n("div",[n("DatePicker",{staticStyle:{width:"100%"}})],1)]),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n        To\n        "),n("div",[n("DatePicker",{staticStyle:{width:"100%"}})],1)]),t._v(" "),n("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[n("Button",{staticStyle:{margin:"5px","min-width":"100%"},attrs:{type:"success"}},[t._v("\n          Apply Filter\n        ")])],1),t._v(" "),n("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[n("Button",{staticStyle:{margin:"5px","min-width":"100px"},attrs:{type:"info"}},[t._v("Route")]),t._v(" "),n("Button",{staticStyle:{margin:"5px","min-width":"100px"}},[t._v("Print Map")]),t._v(" "),n("Button",{staticStyle:{margin:"5px","min-width":"100px"},attrs:{type:"warning"}},[t._v("\n          Speed\n        ")]),t._v(" "),n("Button",{staticStyle:{margin:"5px","min-width":"100px"}},[t._v(" Print Table ")]),t._v(" "),n("Button",{staticStyle:{margin:"5px","min-width":"100px"},attrs:{type:"dashed"}},[t._v("\n          Clear Route\n        ")])],1)])],1)],1)}),[],!1,null,"785129dd",null);e.default=component.exports}}]);